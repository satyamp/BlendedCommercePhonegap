(function(){window.mmpApp={Models:{},Collections:{},Views:{},Routers:{},Helpers:{},Settings:{defaultUrl:"http://178.254.25.56"},init:function(){"use strict";var a,b=this;return this.eventDispatcher=new this.Helpers.EventHelper,this.identity=new this.Helpers.IdentityHelper,document.addEventListener("deviceready",function(){return b.eventDispatcher.addAdapter(b.Helpers.NFCEventHelper),b.identity.refresh(),b.appCart.fetch()}),this.appCart=new this.Collections.CartCollection,this.appModal=new this.Views.ModalView,this.appRouter=new this.Routers.ApplicationRouter,a=Modernizr.history,Backbone.history.start({pushState:!1}),this.eventDispatcher.addAdapter(this.Helpers.PusherEventHelper)}},$(function(){"use strict";return mmpApp.init()})}).call(this),this.JST=this.JST||{},this.JST["app/scripts/templates/addedToCart.ejs"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<section class="modal--window-content-section centered">\n  <strong>Der Artikel liegt nun in deiner Tasche</strong>\n  <a href="#" class="button primary full-width close">Weitershoppen</a>\n</section>\n<section class="modal--window-content-action">\n  <h2 class="headline-h3">Dazu passt</h2>\n  <ul class="related-products">\n    ',collection.models.forEach(function(a){__p+='\n      <li class="related-products--item close" data-sku="'+(null==(__t=a.attributes.product_data.sku)?"":__t)+'">\n        <img src="http://178.254.25.56/'+(null==(__t=a.attributes.media.default_image)?"":__t)+'" class="related-products--item-thumbnail">\n      </li>\n    '}),__p+="\n  </ul>\n</section>\n";return __p},this.JST["app/scripts/templates/cart.ejs"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj){if(collection.models.length>0){__p+='\n  <section class="cart modal--window-content-section">\n    ';for(var i=0;i<collection.models.length;i++)__p+='\n      <div class="cart--entry">\n        <div class="cart--entry-info">\n          <h3 class="headline-h3 cart--entry-name">'+(null==(__t=collection.models[i].attributes.name)?"":__t)+'</h3>\n          <span class="cart--entry-meta">\n            '+(null==(__t=collection.models[i].attributes.quantity)?"":__t)+' Stück\n          </span>\n        </div>\n        <div class="cart--entry-price">\n          '+(null==(__t=collection.models[i].attributes.total)?"":__t)+"€\n        </div>\n      </div>\n    ";__p+='\n    <div class="cart--entry total">\n      <div class="cart--entry-price">\n        <span class="cart--entry-total-label">Summe:</span>\n        '+(null==(__t=Math.round(100*collection.getTotal())/100)?"":__t)+'€\n      </div>\n    </div>\n  </section>\n  <div class="cart--actions">\n    <a href="#" class="button primary full-width">Zur Kasse</a>\n    <a href="#" class="button inverse full-width close">Weiter Einkaufen</a>\n</div>\n'}else __p+='\n  <div class="cart cart--empty modal--window-content-section">\n    <h2>Deine Tasche ist leer</h2>\n    <a href="#" class="button close primary full-width">Einkaufen</a>\n  </div>\n';__p+="\n"}return __p},this.JST["app/scripts/templates/cartBadge.ejs"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+=(null==(__t=getCount())?"":__t)+"\n";return __p},this.JST["app/scripts/templates/cashier.ejs"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<section id="cashier-view" class="centered">\n  <h1 class="headline-h1">Kasse</h1>\n  <p class="headline-h4">Auf Kunden warten &hellip;</p>\n</section>\n';return __p},this.JST["app/scripts/templates/cashiercart.ejs"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj){if(__p+='<section id="cashier--modal">\n  ',collection.models.length>0){__p+='\n    <section class="cart modal--window-content-section hide-when-paid">\n      <h1 class="headline-h1">Kunde möchte bezahlen</h1>\n      ';for(var i=0;i<collection.models.length;i++)__p+='\n        <div class="cart--entry">\n          <div class="cart--entry-info">\n            <h3 class="headline-h3 cart--entry-name">'+(null==(__t=collection.models[i].attributes.name)?"":__t)+'</h3>\n            <span class="cart--entry-meta">\n              '+(null==(__t=collection.models[i].attributes.quantity)?"":__t)+' Stück\n            </span>\n          </div>\n          <div class="cart--entry-price">\n            '+(null==(__t=collection.models[i].attributes.total)?"":__t)+"€\n          </div>\n        </div>\n      ";__p+='\n      <div class="cart--entry total">\n        <div class="cart--entry-price">\n          <span class="cart--entry-total-label">Summe:</span>\n          '+(null==(__t=Math.round(100*collection.getTotal())/100)?"":__t)+'€\n        </div>\n      </div>\n    </section>\n    <div class="cart--actions centered hide-when-paid">\n      <p class="label" id="cashier--payment-label">Auf kontaktlose Bezahlung durch Kunden warten...</p>\n      <a href="#" class="button inverse full-width" id="markAsPaid">Als bar bezahlt markieren</a>\n    </div>\n    <section class="modal--window-content-section show-when-paid">\n      <h2 class="headline-h2">Bezahlt</h2>\n      <p class="label">Die Bestellung wurde vom Kunden bezahlt...</p>\n    </section>\n  '}__p+="\n</section>\n"}return __p},this.JST["app/scripts/templates/checkedout.ejs"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div id="checkout--thanks" class="centered">\n  <h2 class="headline-h2">Vielen Dank</h2>\n  <p class="label">Wir haben deine Bezahlung erhalten und stellen deine Artikel für dich zusammen.</p>\n</div>\n\n<section class="modal--window-content-section centered">\n  <div id="checkout--shipping">\n    <h2 class="headline-h4">Wie möchtest du deine Ware erhalten?</h2>\n    <ul id="checkout--shipping-list">\n      <li class="checkout--shipping-list-item close" id="checkout--pickup">\n        Am Ausgang abholen\n      </li>\n      <li class="checkout--shipping-list-item close" id="checkout--bringly">\n        Per bring.ly versenden\n      </li>\n    </ul>\n  </div>\n</section>\n';return __p},this.JST["app/scripts/templates/checkout.ejs"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+=collection.length>0?'\n  <section id="checkout">\n    <div id="checkout--total" class="centered">\n      <div id="checkout--total-price">'+(null==(__t=collection.getFormatedTotal())?"":__t)+'€</div>\n      <div id="checkout--total-count">'+(null==(__t=collection.getCount())?"":__t)+' Artikel</div>\n    </div>\n    <section id="checkout--payment">\n      <div id="checkout--payment-title">\n        <h3 class="headline-h4 centered">Hinterlegte Kreditkarte</h3>\n      </div>\n      <form id="checkout--payment-saved-card">\n        <div class="checkout--form-entry">\n          <label class="checkout--form-label" for="card">\n            Karte\n          </label>\n          <input type="text" class="checkout--form-input credit-card visa" name="card" id="card" value="•••• •••• •••• 4242">\n        </div>\n        <div class="checkout--form-entry">\n          <label class="checkout--form-label" for="valid">\n            Gültig bis\n          </label>\n          <input type="text" class="checkout--form-input" name="valid" id="valid" value="10 / 2016">\n        </div>\n        <div class="checkout--form-entry">\n          <label class="checkout--form-label" for="cvc">\n            CVC\n          </label>\n          <input type="text" class="checkout--form-input" name="cvc" id="cvc" value="•••">\n        </div>\n      </form>\n      <a href="#" class="button primary full-width" id="checkoutButton">Jetzt Bezahlen</a>\n    </section>\n  </section>\n':'\n  <section class="view--section centered">\n    <h1 class="headline-h1">Deine Tasche ist leer</h1>\n    <p>Bitte lege erst Artikel in deine Tasche bevor du zur Kasse gehst.</p>\n    <a href="#" class="button primary full-width">Einkauf fortsetzen</a>\n  </section>\n',__p+="\n";return __p},this.JST["app/scripts/templates/modal.ejs"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="modal--container">\n  <div class="modal--window">\n\n  </div>\n</div>\n';return __p},this.JST["app/scripts/templates/product.ejs"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<a href="" id="backLink" class="header--button">&lsaquo;</a>\n\n<div class="article--carousel">\n  <div class="article--carousel-item-wrapper">\n    <img src="http://178.254.25.56/'+(null==(__t=model.attributes.media.default_image)?"":__t)+'" class="article--image article--carousel-item">\n    <img src="http://178.254.25.56/'+(null==(__t=model.attributes.media.secondary_image)?"":__t)+'" class="article--image article--carousel-item">\n  </div>\n</div>\n\n<div class="article--content">\n  <div class="article--intro">\n    <h1 class="headline-h2 article--title">'+(null==(__t=model.attributes.product_data.name)?"":__t)+'</h1>\n    <small class="article--sku">Artikelnummer: '+(null==(__t=model.attributes.product_data.sku)?"":__t)+'</small>\n    <h2 class="article--price">€ '+(null==(__t=model.attributes.product_data.price)?"":__t)+"</h2>\n    <p>"+(null==(__t=model.attributes.product_data.short_description)?"":__t)+'</p>\n  </div>\n\n  <div class="article--box article--actions">\n    <div class="article--size-picker centered">\n      <h2 class="headline-h3">Größe</h2>\n      <ul class="article--size-picker-sizes">\n        <li class="article--size-picker-size">XS</li>\n        <li class="article--size-picker-size">S</li>\n        <li class="article--size-picker-size active">M</li>\n        <li class="article--size-picker-size">L</li>\n        <li class="article--size-picker-size">XL</li>\n      </ul>\n    </div>\n    <div class="article--buttons">\n      <a href="#" id="addToCart" class="button primary full-width">In meine Tasche</a>\n    </div>\n  </div>\n\n  <div class="article--details">\n    <h2 class="headline-h3">Weitere Details</h3>\n    <p>'+(null==(__t=model.attributes.product_data.description)?"":__t)+'</p>\n  </div>\n\n  <div class="article--box article--related">\n    <h2 class="headline-h3">Dazu passt</h2>\n    <ul class="related-products">\n      ',collection.models.forEach(function(a){__p+='\n        <li class="related-products--item" data-sku="'+(null==(__t=a.attributes.product_data.sku)?"":__t)+'">\n          <img src="http://178.254.25.56/'+(null==(__t=a.attributes.media.default_image)?"":__t)+'" class="related-products--item-thumbnail">\n        </li>\n      '}),__p+="\n    </ul>\n  </div>\n\n</div>\n";return __p},this.JST["app/scripts/templates/root.ejs"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div id="rootView">\n  <h1 class="headline-h1">Scannen</h1>\n  <p>Halte Dein Handy über einen der roten Punkte im Laden um mit den Produkten zu interagieren.</p>\n</div>\n\n<div class="interaction-indicator">\n  <div class="interaction-indicator--circle">\n\n  </div>\n</div>\n';return __p},function(){"use strict";var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};mmpApp.Models.ProductModel=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.url=function(){var a;return a=this.id,""+mmpApp.Settings.defaultUrl+"/product/"+a+".json"},d.prototype.addToCart=function(a){var b;return b=this.attributes.product_data.id,$.get(""+mmpApp.Settings.defaultUrl+"/product/"+b+"/buy.json",{identity:mmpApp.identity.getIdentity()},function(b){return a(b)})},d.prototype.showOnScreen=function(a){var b;return b=this.attributes.product_data.sku,$.get(""+mmpApp.Settings.defaultUrl+"/product/"+b+"/screen.json",function(b){return a(b)})},d}(Backbone.Model)}.call(this),function(){"use strict";var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};mmpApp.Routers.ApplicationRouter=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.initialize=function(){var a=this;return this.productView=new mmpApp.Views.ProductView,this.cartBadge=new mmpApp.Views.CartbadgeView(mmpApp.appCart),this.cartBadge.render(),mmpApp.appCart.fetch(),$.subscribe("checkout",function(){return a.navigate("/checkout",{trigger:!0})}),this.currentView=null},d.prototype.routes={"":"rootRoute","product/:id":"showProduct",checkout:"checkout",cashier:"cashier"},d.prototype.changeView=function(a){return this.currentView=a,this.currentView.render()},d.prototype.rootRoute=function(){var a;return a=new mmpApp.Views.RootView,this.changeView(a)},d.prototype.showProduct=function(a){var b,c,d=this;return c=new mmpApp.Models.ProductModel({id:a}),b=c.fetch(),b.done(function(){return d.productView.addModel(c),d.changeView(d.productView)})},d.prototype.checkout=function(){var a;return a=new mmpApp.Views.CheckoutView(mmpApp.appCart),this.changeView(a)},d.prototype.cashier=function(){var a;return a=new mmpApp.Views.CashierView,this.changeView(a)},d}(Backbone.Router)}.call(this),function(){"use strict";var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};mmpApp.Views.ModalView=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["app/scripts/templates/modal.ejs"],d.prototype.el="#app-body",d.prototype.events={"click .close":"unrender"},d.prototype.unrender=function(a){return null!=a&&a.preventDefault(),this.$el.find(".modal--container").fadeOut(500,function(){return $(this).remove()})},d.prototype.render=function(a){return this.$el.find(".modal--container").remove(),this.modal=$(this.template()),this.modal.find(".modal--window").html(a),this.$el.append(this.modal),this.$el.find(".modal--container").fadeIn()},d}(Backbone.View)}.call(this),function(){"use strict";var a,b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};mmpApp.Views.ProductView=function(b){function c(){return a=c.__super__.constructor.apply(this,arguments)}return d(c,b),c.prototype.template=JST["app/scripts/templates/product.ejs"],c.prototype.el="#app-body",c.prototype.events={"click #addToCart":"addToCart","click #backLink":"back","click .related-products--item":"viewRelated","click .article--size-picker-size":"changeSize"},c.prototype.initialize=function(){var a=this;return this.collection=new mmpApp.Collections.ProductsCollection,this.collection.on("add change",this.render,this),$.subscribe("showOnScreen",function(){return a.model.showOnScreen(function(){return alert("Showing on Screen now!")})})},c.prototype.addModel=function(a){return this.model=a,this.collection.fetch()},c.prototype.render=function(){var a,b;return this.$el.html(this.template({model:this.model,collection:this.collection})),this.$el.find(".article--image").on("load",function(){return $(this).addClass("loaded")}),this.$el.find("article--carousel-item-wrapper").hammer().bind("swiperight",function(){return $(this).addClass("toggled")}),b=0,a=100,$(window).on("scroll",function(){var c;return c=$(this).scrollTop(),Math.abs(b-c)<=a?void 0:(c>b?$(".header--button").addClass("toggled"):$(".header--button").removeClass("toggled"),b=c)}),mmpApp.appModal.unrender()},c.prototype.addToCart=function(a){var b=this;return a.preventDefault(),this.model.addToCart(function(){var a;return mmpApp.appCart.fetch(),a=new mmpApp.Views.addToCartView(b.collection),a.render()})},c.prototype.back=function(a){return a.preventDefault(),mmpApp.appRouter.navigate("/",{trigger:!0})},c.prototype.toggleCarousel=function(){return this.$el.find(".article--carousel-item-wrapper").toggleClass("toggled")},c.prototype.viewRelated=function(a){var b;return a.preventDefault(),b=$(a.currentTarget).data("sku"),mmpApp.appRouter.navigate("/product/"+b,{trigger:!0}),window.scrollTo(0,0)},c.prototype.changeSize=function(a){return this.$el.find(".article--size-picker-size").removeClass("active"),$(a.currentTarget).addClass("active")},c}(Backbone.View),mmpApp.Views.addToCartView=function(a){function c(){return b=c.__super__.constructor.apply(this,arguments)}return d(c,a),c.prototype.template=JST["app/scripts/templates/addedToCart.ejs"],c.prototype.events={"click .related-products--item":"viewRelated"},c.prototype.initialize=function(a){this.collection=a},c.prototype.render=function(){return mmpApp.appModal.render(this.template({collection:this.collection}))},c.prototype.viewRelated=function(a){var b;return a.stopPropagation(),b=$(a.currentTarget).data("sku"),mmpApp.appRouter.navigate("/product/"+b,{trigger:!0})},c}(Backbone.View)}.call(this),function(){"use strict";var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};mmpApp.Views.RootView=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["app/scripts/templates/root.ejs"],d.prototype.el="#app-body",d.prototype.render=function(){var a=this;return this.$el.html(this.template()),$.subscribe("showProduct",function(b,c){return console.log(c),a.$el.find(".interaction-indicator").addClass("active"),setTimeout(function(){return mmpApp.appRouter.navigate("product/"+c,{trigger:!0})},500)})},d.prototype.showProduct=function(a){return a.preventDefault(),mmpApp.appRouter.navigate("product/chpmnd1",{trigger:!0})},d}(Backbone.View)}.call(this),function(){mmpApp.Helpers.EventHelper=function(){function a(){}return a.prototype.addAdapter=function(a){var b;return b=new a,b.listen(this)},a.prototype.broadcast=function(a,b){return $.publish(a,b)},a}()}.call(this),function(){mmpApp.Helpers.PusherEventHelper=function(){function a(){this.pusher=new Pusher("53fcdc31927d1aaf9cdd"),this.channel=this.pusher.subscribe("test_channel")}return a.prototype.listen=function(a){return this.channel.bind_all(function(b){var c,d;return d=b.split(":"),c=d[0],b=d[1],a.broadcast(c,b)})},a}()}.call(this),function(){mmpApp.Helpers.NFCEventHelper=function(){function a(){this.nfc=nfc,this.events={showProduct:function(a,b){return b.showProduct(a)}}}return a.prototype.listen=function(a){return this.nfc.addNdefListener(function(b){var c,d,e,f,g;return g=b.tag,f=g.ndefMessage,e=nfc.bytesToString(f[0].payload).substring(3).split(":"),d=e[0],c=e[1],a.broadcast(d,c)},function(){return console.log("Waiting for tag")},function(){return alert("Bad NFC error")})},a}()}.call(this),function(){mmpApp.Helpers.IdentityHelper=function(){function a(){}return a.prototype.refresh=function(){return this.identity=null!=("undefined"!=typeof device&&null!==device?device.uuid:void 0)?device.uuid:"test"},a.prototype.getIdentity=function(){return this.identity||this.refresh(),this.identity},a}()}.call(this),function(){!function(a){var b;b=a({}),a.subscribe=function(){b.on.apply(b,arguments)},a.unsubscribe=function(){b.off.apply(b,arguments)},a.publish=function(){b.trigger.apply(b,arguments)}}(jQuery)}.call(this),function(){"use strict";var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};mmpApp.Models.CartitemModel=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d}(Backbone.Model)}.call(this),function(){"use strict";var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};mmpApp.Collections.CartCollection=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.model=mmpApp.Models.CartitemModel,d.prototype.initialize=function(){return this.setIdentity()},d.prototype.url=function(){return""+mmpApp.Settings.defaultUrl+"/cart.json?identity="+this.identity},d.prototype.setIdentity=function(a){return this.identity=null!=a?a:mmpApp.identity.getIdentity()},d.prototype.parse=function(a){return a.order_items},d.prototype.getTotal=function(){return this.models.map(function(a){return parseFloat(a.attributes.total)}).reduce(function(a,b){return a+b})},d.prototype.getFormatedTotal=function(){return 0===this.length?0:100*Math.round(this.getTotal())/100},d.prototype.getCount=function(){return 0===this.length?0:this.models.map(function(a){return a.attributes.quantity}).reduce(function(a,b){return a+b})},d.prototype.triggerCashier=function(){return $.get(""+mmpApp.Settings.defaultUrl+"/checkout/"+this.identity+".json",function(a){return console.log(a)})},d.prototype.checkout=function(a){return $.get(""+mmpApp.Settings.defaultUrl+"/order.json",{identity:this.identity},function(b){return a(b)})},d}(Backbone.Collection)}.call(this),function(){"use strict";var a,b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};mmpApp.Views.CartbadgeView=function(b){function c(){return a=c.__super__.constructor.apply(this,arguments)}return d(c,b),c.prototype.template=JST["app/scripts/templates/cartBadge.ejs"],c.prototype.el="#cartLink",c.prototype.events={click:"showCart"},c.prototype.initialize=function(a){return this.collection=a,this.collection.on("add change",this.render,this),this.detailView=new mmpApp.Views.CartView(this.collection)},c.prototype.render=function(){return this.$el.html(this.template(this.collection))},c.prototype.showCart=function(a){return a.preventDefault(),this.detailView.render()},c}(Backbone.View),mmpApp.Views.CartView=function(a){function c(){return b=c.__super__.constructor.apply(this,arguments)}return d(c,a),c.prototype.template=JST["app/scripts/templates/cart.ejs"],c.prototype.initialize=function(a){this.collection=a},c.prototype.render=function(){return mmpApp.appModal.render(this.template({collection:this.collection}))},c}(Backbone.View)}.call(this),function(){"use strict";var a,b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};mmpApp.Views.CheckoutView=function(b){function c(){return a=c.__super__.constructor.apply(this,arguments)}return d(c,b),c.prototype.template=JST["app/scripts/templates/checkout.ejs"],c.prototype.el="#app-body",c.prototype.events={"click #checkoutButton":"checkout","focus .checkout--form-input":"entryMode","blur .checkout--form-input":"checkoutMode"},c.prototype.initialize=function(a){return this.collection=a,$.subscribe("paid",function(){var a;return a=new mmpApp.Views.CheckedOutView,a.render()})},c.prototype.checkout=function(a){return a.preventDefault(),mmpApp.appCart.checkout(function(){})},c.prototype.entryMode=function(){return this.$el.find("#checkout").addClass("entry")},c.prototype.checkoutMode=function(){return this.$el.find("#checkout").removeClass("entry")},c.prototype.render=function(){return this.collection.on("add change",this.render,this),this.collection.length>0&&this.collection.triggerCashier(),this.$el.html(this.template({collection:this.collection}))},c}(Backbone.View),mmpApp.Views.CheckedOutView=function(a){function c(){return b=c.__super__.constructor.apply(this,arguments)}return d(c,a),c.prototype.template=JST["app/scripts/templates/checkedout.ejs"],c.prototype.events={"click .checkout--shipping-list-item":"toggleShipping"},c.prototype.toggleShipping=function(a){return alert("allo allo!"),$(".checkout--shipping-list-item").removeClass("active"),$(a.currentTarget).addClass("active")},c.prototype.render=function(){return mmpApp.appModal.render(this.template)},c}(Backbone.View)}.call(this),function(){"use strict";var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};mmpApp.Collections.ProductsCollection=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.model=mmpApp.Models.ProductModel,d.prototype.url=function(){return""+mmpApp.Settings.defaultUrl+"/products.json"},d}(Backbone.Collection)}.call(this),function(){"use strict";var a,b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};mmpApp.Views.CashierView=function(b){function c(){return a=c.__super__.constructor.apply(this,arguments)}return d(c,b),c.prototype.template=JST["app/scripts/templates/cashier.ejs"],c.prototype.el="#app-body",c.prototype.initialize=function(){var a=this;return this.cart=new mmpApp.Collections.CartCollection,$.unsubscribe("checkout"),$.subscribe("cashier",function(b,c){return a.cart.setIdentity(c),a.cart.fetch(),a.modal=new mmpApp.Views.CashierCartView(a.cart),a.modal.render()})},c.prototype.render=function(){return this.$el.html(this.template)},c}(Backbone.View),mmpApp.Views.CashierCartView=function(a){function c(){return b=c.__super__.constructor.apply(this,arguments)}return d(c,a),c.prototype.template=JST["app/scripts/templates/cashiercart.ejs"],c.prototype.events={"click #markAsPaid":"markAsPaid"},c.prototype.initialize=function(a){return this.collection=a,this.collection.on("add change",this.render,this),$.subscribe("paid",function(){return $("#cashier--modal").addClass("paid"),setTimeout(function(){return mmpApp.appModal.unrender()},2e3)})},c.prototype.render=function(){return mmpApp.appModal.render(this.template({collection:this.collection}))},c.prototype.markAsPaid=function(a){return alert("Paying!"),a.preventDefault()},c}(Backbone.View)}.call(this);